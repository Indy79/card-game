{"version":3,"sources":["js/components/Login/Login.jsx","js/components/Login/index.js"],"names":["Item","Form","Login","history","username","setUsername","applicationContext","ApplicationContext","socketContext","SocketContext","applicationDispatch","dispatch","socketDispatch","state","isconnected","push","socket","on","user","onFinish","values","onFinishFailed","errorInfo","console","error","remember","required","message"],"mappings":";;;;;;;AAAA,ACAA;;ADCA,eCCeE;;ADAf;;AAKA;;AACA;;;;;;;;;;;;;;;;;;IAEQF,OAASC,WAATD;;AAED,IAAME,KAAK,GAAG,SAARA,KAAQ,GAAM;AACzB,MAAMC,OAAO,GAAG,iCAAhB;;AADyB,kBAEO,qBAAS,IAAT,CAFP;AAAA;AAAA,MAElBC,QAFkB;AAAA,MAERC,WAFQ;;AAGzB,MAAMC,kBAAkB,GAAG,uBAAWC,+BAAX,CAA3B;AACA,MAAMC,aAAa,GAAG,uBAAWC,qBAAX,CAAtB;AACA,MAAMC,mBAAmB,GAAGJ,kBAAkB,CAACK,QAA/C;AACA,MAAMC,cAAc,GAAGJ,aAAa,CAACG,QAArC;AAEA,MAAIL,kBAAkB,CAACO,KAAnB,CAAyBC,WAA7B,EAA0CX,OAAO,CAACY,IAAR,CAAa,OAAb;AAE1C,wBAAU,YAAM;AACd,QAAIX,QAAQ,KAAK,IAAjB,EAAuB;AACvB,QAAMY,MAAM,GAAGR,aAAa,CAACK,KAAd,CAAoBG,MAAnC;AACAA,IAAAA,MAAM,CAACC,EAAP,CAAU,aAAV,EAAyB,UAAAC,IAAI,EAAI;AAC/BR,MAAAA,mBAAmB,CAAC,8BAAYQ,IAAZ,CAAD,CAAnB;AACAf,MAAAA,OAAO,CAACY,IAAR,CAAa,OAAb;AACD,KAHD;AAID,GAPD,EAOG,CAACX,QAAD,CAPH;;AASA,MAAMe,QAAQ,GAAG,SAAXA,QAAW,CAAAC,MAAM,EAAI;AACzBR,IAAAA,cAAc,CAAC,iCAAoBQ,MAAM,CAAChB,QAA3B,CAAD,CAAd;AACAC,IAAAA,WAAW,CAACe,MAAM,CAAChB,QAAR,CAAX;AACD,GAHD;;AAIA,MAAMiB,cAAc,GAAG,SAAjBA,cAAiB,CAAAC,SAAS,EAAI;AAClCZ,IAAAA,mBAAmB,CAAC,kCAAD,CAAnB;AACAa,IAAAA,OAAO,CAACC,KAAR,CAAc,SAAd,EAAyBF,SAAzB;AACD,GAHD;;AAIA,sBACE,6BAAC,SAAD,qBACE,6BAAC,SAAD;AAAK,IAAA,IAAI,EAAE,CAAX;AAAc,IAAA,MAAM,EAAE;AAAtB,kBACE,6BAAC,UAAD;AACE,IAAA,IAAI,EAAC,OADP;AAEE,IAAA,aAAa,EAAE;AAAEG,MAAAA,QAAQ,EAAE;AAAZ,KAFjB;AAGE,IAAA,QAAQ,EAAEN,QAHZ;AAIE,IAAA,cAAc,EAAEE;AAJlB,kBAME,6BAAC,IAAD;AACE,IAAA,KAAK,EAAC,UADR;AAEE,IAAA,IAAI,EAAC,UAFP;AAGE,IAAA,KAAK,EAAE,CAAC;AAAEK,MAAAA,QAAQ,EAAE,IAAZ;AAAkBC,MAAAA,OAAO,EAAE;AAA3B,KAAD;AAHT,kBAKE,6BAAC,WAAD,OALF,CANF,eAaE,6BAAC,IAAD;AAAM,IAAA,IAAI,EAAC,UAAX;AAAsB,IAAA,aAAa,EAAC;AAApC,kBACE,6BAAC,cAAD,sBADF,CAbF,eAgBE,6BAAC,IAAD,qBACE,6BAAC,YAAD;AAAQ,IAAA,IAAI,EAAC,SAAb;AAAuB,IAAA,QAAQ,EAAC;AAAhC,cADF,CAhBF,CADF,CADF,CADF;AA4BD,CAvDM","file":"Login.b2c47d4f.js","sourceRoot":"..\\..\\src\\client","sourcesContent":["import React, { useContext, useEffect, useState } from 'react'\r\nimport { Form, Input, Button, Checkbox, Row, Col } from 'antd'\r\nimport {\r\n  ApplicationContext,\r\n  disconnectUser,\r\n  connectUser,\r\n} from '../../contexts/Application'\r\nimport { SocketContext, connectWithNickname } from '../../contexts/Socket'\r\nimport { useHistory } from 'react-router-dom'\r\n\r\nconst { Item } = Form\r\n\r\nexport const Login = () => {\r\n  const history = useHistory()\r\n  const [username, setUsername] = useState(null)\r\n  const applicationContext = useContext(ApplicationContext)\r\n  const socketContext = useContext(SocketContext)\r\n  const applicationDispatch = applicationContext.dispatch\r\n  const socketDispatch = socketContext.dispatch\r\n\r\n  if (applicationContext.state.isconnected) history.push('/game')\r\n\r\n  useEffect(() => {\r\n    if (username === null) return\r\n    const socket = socketContext.state.socket\r\n    socket.on('UPDATE_SELF', user => {\r\n      applicationDispatch(connectUser(user))\r\n      history.push('/game')\r\n    })\r\n  }, [username])\r\n\r\n  const onFinish = values => {\r\n    socketDispatch(connectWithNickname(values.username))\r\n    setUsername(values.username)\r\n  }\r\n  const onFinishFailed = errorInfo => {\r\n    applicationDispatch(disconnectUser())\r\n    console.error('Failed:', errorInfo)\r\n  }\r\n  return (\r\n    <Row>\r\n      <Col span={6} offset={8}>\r\n        <Form\r\n          name=\"basic\"\r\n          initialValues={{ remember: true }}\r\n          onFinish={onFinish}\r\n          onFinishFailed={onFinishFailed}\r\n        >\r\n          <Item\r\n            label=\"Username\"\r\n            name=\"username\"\r\n            rules={[{ required: true, message: 'Please input your username!' }]}\r\n          >\r\n            <Input />\r\n          </Item>\r\n          <Item name=\"remember\" valuePropName=\"checked\">\r\n            <Checkbox>Remember me</Checkbox>\r\n          </Item>\r\n          <Item>\r\n            <Button type=\"primary\" htmlType=\"submit\">\r\n              Submit\r\n            </Button>\r\n          </Item>\r\n        </Form>\r\n      </Col>\r\n    </Row>\r\n  )\r\n}\r\n","import { Login } from './Login'\r\n\r\nexport default Login\r\n"]}